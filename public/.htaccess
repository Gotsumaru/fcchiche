<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /

    # Ne pas reécrire les fichiers et dossiers existants
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d

    # Ne pas réécrire les requêtes API (.php files)
    RewriteCond %{REQUEST_URI} !^/api/ [NC]
    RewriteCond %{REQUEST_FILENAME} !\.php$ [NC]

    # Ne pas réécrire les fichiers statiques du build React
    RewriteCond %{REQUEST_URI} !^/dist/ [NC]
    RewriteCond %{REQUEST_URI} !^/assets/ [NC]
    RewriteCond %{REQUEST_URI} !^/equipes/ [NC]

    # Rediriger tout vers index.html du React pour que React Router fonctionne
    RewriteRule ^(.*)$ dist/index.html [QSA,L]
</IfModule>

# Compression GZIP
<IfModule mod_deflate.c>
    AddOutputFilterByType DEFLATE text/html text/plain text/xml text/css text/javascript application/javascript application/json
</IfModule>

# Cache
<IfModule mod_headers.c>
    <FilesMatch "\.(jpg|jpeg|png|gif|ico|css|js|svg|woff|woff2)$">
        Header set Cache-Control "max-age=31536000, public"
    </FilesMatch>

    <FilesMatch "\.html$">
        Header set Cache-Control "max-age=3600, must-revalidate"
    </FilesMatch>
</IfModule>
