<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /

    # Ne pas réécrire les fichiers et dossiers existants
    RewriteCond %{REQUEST_FILENAME} -f [OR]
    RewriteCond %{REQUEST_FILENAME} -d
    RewriteRule ^ - [L]

    # Ne pas réécrire les requêtes API
    RewriteCond %{REQUEST_URI} ^/api/ [NC]
    RewriteRule ^ - [L]

    # Rediriger tout le reste vers index.html (React Router)
    RewriteRule ^(.*)$ index.html [QSA,L]
</IfModule>

# Bloquer accès aux dossiers sensibles
<DirectoryMatch "^(config|cron|logs|sql)">
    Require all denied
</DirectoryMatch>

# Bloquer fichiers cachés et sensibles
<FilesMatch "^\.">
    Require all denied
</FilesMatch>

<FilesMatch "\.(env|example|git|md)$">
    Require all denied
</FilesMatch>